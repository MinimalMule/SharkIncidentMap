<!DOCTYPE html>

<html>
<head>
<link rel="stylesheet" type="text/css" href="styles.css">
 <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
     integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
     crossorigin=""/>
</head>
    <body>
		<div id="map"></div>

		 <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
     integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
     crossorigin=""></script>
		<script type="module">
			const map = L.map('map').setView([-31.931935325885334, 115.87629294067254], 5);
			
						L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
				maxZoom: 19,
				attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
			}).addTo(map);
			
			fetch('./sharklocdat.txt')
				.then(response => {
					// send an error if there's a problem
					if (!response.ok) {
						throw new Error(`HTTP error! Status: ${response.status}`);
					}
					return response.text();
				})
				// if there's no problem then read line by line
				.then(textContent => {
					// get the text.
					const parsedString = textContent.split('\n').map((line) => line.split('\t'));
				
					for (let i = 1; i < parsedString.length; i++) {
						var day = parsedString[i][0];
						var month = parsedString[i][1];
						var year = parsedString[i][2];
						var injury = parsedString[i][3];
						var latitude = parsedString[i][6];
						var longitude = parsedString[i][7];
						var sharkType = parsedString[i][8];
					
						var marker = L.marker([latitude,longitude]).addTo(map)
						
						if (injury == "fatal") {
							marker._icon.style.filter = "hue-rotate(120deg)"
						}
												
					} 

					})
					.catch(error => {
						// catch errors
						console.error('Fetch error:', error);
					});		
		</script>
    </body>
</html>